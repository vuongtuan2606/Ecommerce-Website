<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{administrator/common/common :: html_head}"></head>

<body>

  <!-- ======= Header ======= -->
  <header th:replace="~{administrator/common/common :: header}" ></header><!-- End Header -->

  <!-- ======= Sidebar ======= -->
  <aside th:replace="~{administrator/common/common :: sidebar}" ></aside><!-- End Sidebar-->

  <main id="main" class="main">

    <div class="pagetitle">
      <h1>Quản lý danh mục</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a th:href="@{/admin/home}">Home</a></li>
          <li class="breadcrumb-item active"><a th:href="@{/admin/categories}">[[${pageTitle}]]</a></li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section admin-user">
      <div class="row">
        <!-- columns element-button -->
        <div class="col-lg-12 ol-sm-12 element-button ">
          <div class="row">
            <div class="col-xl-12 element_container ">

              <div class="search-bar" th:replace="~{administrator/common/fragments :: search_form('/admin/categories')}">
              </div>
              <!-- End search bar-->

              <div class="button-container">
                <a class="btn btn-success" th:href="@{/admin/categories/create}" title="Thêm"><i class="bi bi-file-earmark-person"></i> Tạo mới </a>
                <a class="btn btn-primary" th:href="@{/admin/categories/export/excel}"  title="In"><i class="bi bi-file-earmark-excel"></i> Xuất Excel </a>
                <a class="btn btn-secondary" th:href="@{/admin/categories/export/pdf}"><i class="bi bi-file-pdf"></i> Xuất PDF </a>
              </div>

            </div>
          </div>
        </div><!-- End columns element-button -->

        <div th:if="${message != null}" class=" alert alert-success text-center">
          [[${message}]]
        </div>

        <!-- columns table -->
        <div class="col-lg-12 col-sm-12">
          <div class="card">
            <div class="card-body">
              <div class="table-wrapper">
                <table class="table table-hover table-responsive ">
                  <thead>
                  <tr>
                    <th scope="col">id</th>

                    <th scope="col">image</th>

                    <th th:replace="~{administrator/common/fragments :: column_link('name', ' Category name')}"></th>

                    <th scope="col">alias</th>

                    <th scope="col">Enabled</th>

                    <th scope="col">Other</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr  th:each="category : ${listCategory}">

                    <td scope="row" th:text="${category.id}"></td>

                    <td >
                      <span th:if="${category.image == null}" class="bi bi-card-image" style="color: darkgrey;font-size: 50px"></span>
                      <img th:if="${category.image != null}" th:src="@{${category.imagePath}}" style="width: 100px; height:auto;" >
                    </td>

                    <td th:text="${category.name}"></td>

                    <td th:text="${category.alias}"></td>

                    <td th:replace="~{administrator/common/fragments :: status(${category.enabled}, '/admin/categories/' + ${category.id})}" ></td>

                    <td class="table-td-center">
                      <a th:replace="~{administrator/common/fragments :: delete(${category.id}, '/admin/categories/delete/' + ${category.id})}" ></a>

                      <a th:replace="~{administrator/common/fragments :: edit('/admin/categories/edit/' + ${category.id}) }"></a>
                    </td>

                  </tr>
                  </tbody>
                </table>
              </div>

              <div class="text-center m-1" th:if="${totalItem > 0}">
                <span>Tìm thấy  [[${startCount}]] to [[${endCount}]] of [[${totalItem}]]</span>
              </div>

              <div class="text-center m-1" th:unless="${totalItem > 0}">
                <span >Không tìm thấy người dùng</span>
              </div>

              <div th:if="${totalPages > 1}">
                <!-- Pagination with icons -->
                <nav aria-label="Page navigation ">
                  <ul class="pagination justify-content-end" >

                    <li th:class="${totalPages > 1  ? 'page-item' : 'page-item disabled'}">
                      <a class="page-link" th:href="@{'/admin/categories/page/'+ ${totalPages -1} +'?sortField='+${sortField} +'&sortDir=' +${sortDir} +${keyword != null ? '&keyword=' + keyword : ' '} }" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                      </a>
                    </li>

                    <li th:class="${currentPage != i ? 'page-item' : 'page-item active'}"
                        th:each="i : ${#numbers.sequence(1, totalPages)}">
                      <a class="page-link" th:href="@{'/admin/categories/page/'+ ${i} +'?sortField='+${sortField} +'&sortDir=' +${sortDir} +${keyword != null ? '&keyword=' + keyword : ' '}}">[[${i}]]</a>
                    </li>

                    <li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}" >
                      <a class="page-link" th:href="@{'/admin/categories/page/'+ ${currentPage + 1 }+'?sortField='+${sortField} +'&sortDir=' +${sortDir} +${keyword != null ? '&keyword=' + keyword : ' '}}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                      </a>
                    </li>

                    <li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
                      <a class="page-link" th:href="@{'/admin/categories/page/'+ ${totalPages}+'?sortField='+${sortField} +'&sortDir=' +${sortDir}}" aria-label="Next">
                        Last
                      </a>
                    </li>

                  </ul>
                </nav><!-- End Pagination with icons -->
              </div>
              <!-- Modal -->
              <div th:replace="~{administrator/common/fragments_modal :: modal_dialog}"></div>
            </div>
          </div>

        </div><!-- End columns table-->
      </div>
    </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer th:replace="~{administrator/common/common :: footer}" ></footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

   <!-- ======= JS ======= -->
  <span th:replace="~{administrator/common/common :: js}"></span>

  <script type="text/javascript">

    moduleURL = "[[@{/admin/categories}]]";


  </script>

</body>

</html>